<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Nanum+Myeongjo&family=Sunflower:wght@300&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>

<title>Insert title here</title>
<style>
	div.memo{
		position:absolute;
		border:1px solid gray;
		font-family: 'Sunflower';
		font-size:1.4em;
	}
	div.button{
		left:150px;
		top:30px;
		width:400px;
		height:100px;
		line-height:100px;
		text-align:center;
	}
	div.addform{
		left:100px;
		top:150px;
		width:500px;
		height:450px;
		padding:20px 20px;
	}
	img.select{
		border:2px solid red;
	}
	img{
		cursor:pointer;
	}
</style>
<script type="text/javascript">
	$(function(){
		//처음 로딩시 만들어두기 
		//list();
		
		//입력폼 안보이게
			$("div.addform").hide();
			$("div.updateform").hide();
			
			//메모추가버튼 누르면 입력폼 보이게
			$("#btnadd").click(function(){
				$(".addform").slideToggle('slow');
			});
			
			//이모티콘 2번인덱스에 select 클래스 추가
			$("img.emot:eq(2)").addClass("select");
			//이모티콘 2번인덱스의 src값을 얻어서 input에 넣어주기
			$("#emot").val($("img.emot").eq(2).attr("src"));
			//이모티콘 선택 시 값 변경하기
			$("img.emot").click(function(){
				$(this).siblings().removeClass("select");
				$(this).addClass("select");
				$("#emot").val($(this).attr("src"));
				
				
			});
			$("#dbsave").click(function(){
				var writer=$("#writer").val();
				var content=$("#content").val();
				var emot=$("#emot").val();
				
				var data="writer="+writer+"&content="+content+"&emot="+emot;
				
				$.ajax({
					type:"post",
					url:"memoInsert.jsp",
					dataType:"json",
					data:data,
					
					success:function(res){
						alert("성공");
					}
					
				})
				
			})
			
	});
	//list는 사용자함수로 만들고 필요할때 호출
	function list(){
		
	}
	
	
</script>
</head>
<body>
		
	<div class="memo button">
		<button type="button" class="btn btn-info" id="btnadd"> 메모추가 </button>
	</div>	
	<div class="memo addform">
	<!-- action 주면 동기방식이라 쓰지 않음 -->
		<form id="addfrm">
			<table class="table table-bordered">
				<caption align="top"><b>메모 추가</b></caption>
				<tr>
					<th class="table-warning">작성자</th>
					<td>
						<input type="text" class="form-control input-sm"
						 name="writer" id="writer" style="width: 150px;">
					</td>
				</tr>
				<tr>
					<th class="table-warning">메모</th>
					<td>
						<textarea style="width:360px; height:100px;" class="form-control input-sm"
						 name="content" id="content" style="width: 150px;"></textarea>
						
					</td>
				</tr>
				<tr>
					<th>이모티콘 선택</th>
					<td>
						<!-- for문으로 이모티콘 9개 넣기 -->
						<input type="hidden" name="emot" id="emot">
						<script type="text/javascript">
						
							let s="";
							for(var i=1;i<=10;i++){
								s+="<img src='../image/avata/b"+i+".png' width='50' class='emot'>";
								if(i==5){
									s+="<br>";
								}
							}
							document.write(s);
						</script>
					</td>
				</tr>
				
				<tr>
					<td colspan="2" align="center">
						<button type="button" id="dbsave" class="btn btn-warning">DB에 저장하기</button>
					</td>
				</tr>
			</table>
		</form>
	</div>
	<div class="memo updateform">update</div>
	<div class="memo list">list</div>
</body>
</html>